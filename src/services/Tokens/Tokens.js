const EthereumTokens = [
    {
        "name": '0x',
        "symbol": "ZRX",
        "address": '0xe41d2489571d322189246dafa5ebde1f4699f498',
        "logo": "0x.png",
        "decimal": 18
    },
    {
        "name": 'AdToken',
        "symbol": "ADT",
        "address": '0xd0d6d6c5fe4a677d343cc433536bb717bae167dd',
        "logo": "adtoken.png",
        "decimal": 9
    },
    {
        "name": 'AirSwap',
        "symbol": "AST",
        "address": '0x27054b13b1b798b345b591a4d22e6562d47ea75a',
        "logo": "airswap.png",
        "decimal": 4
    },
    {
        "name": 'Aventus',
        "symbol": "AVT",
        "address": '0x0d88ed6e74bbfd96b831231638b66c05571e824f',
        "logo": "aventus.png",
        "decimal": 18
    },
    {
        "name": 'Augur',
        "symbol": "REP",
        "address": '0xe94327d07fc17907b4db788e5adf2ed424addff6',
        "logo": "augur.png",
        "decimal": 18
    },
    {
        "name": 'Basic Attention Token',
        "symbol": "BAT",
        "address": '0x0d8775f648430679a709e98d2b0cb6250d2887ef',
        "logo": "bat.png",
        "decimal": 18
    },
    {
        "name": 'Binance',
        "symbol": "BNB",
        "address": '0xb8c77482e45f1f44de1745f52c74426c631bdd52',
        "logo": "binance.png",
        "decimal": 18
    },
    {
        "name": 'Blockmason Credit Protocol Token',
        "symbol": "BCPT",
        "address": '0x1c4481750daa5ff521a2a7490d9981ed46465dbd',
        "logo": "blockmason_cp.png",
        "decimal": 18
    },
    {
        "name": 'Bloom',
        "symbol": "BLT",
        "address": '0x107c4504cd79c5d2696ea0030a8dd4e92601b82e',
        "logo": "bloom.png",
        "decimal": 18
    },
    {
        "name": 'Bread',
        "symbol": "BRD",
        "address": '0x558ec3152e2eb2174905cd19aea4e34a23de9ad6',
        "logo": "bread.png",
        "decimal": 18
    },
    {
        "name": 'Chainlink',
        "symbol": "LINK",
        "address": '0x514910771af9ca656af840dff83e8264ecf986ca',
        "logo": "chainlink.png",
        "decimal": 18
    },
    {
        "name": 'Civic',
        "symbol": "CVC",
        "address": '0x41e5560054824ea6b0732e656e3ad64e20e94e45',
        "logo": "civic.png",
        "decimal": 8
    },
    {
        "name": 'Cindicator',
        "symbol": "CND",
        "address": '0xd4c435f5b09f855c3317c8524cb1f586e42795fa',
        "logo": "cindicator.png",
        "decimal": 18
    },
    {
        "name": 'ELF',
        "symbol": "ELF",
        "address": '0xbf2179859fc6d5bee9bf9158632dc51678a4100e',
        "logo": "aelf.png",
        "decimal": 18
    },
    {
        "name": 'EOS',
        "symbol": "EOS",
        "address": '0x86fa049857e0209aa7d9e616f7eb3b3b78ecfdb0',
        "logo": "eos.png",
        "decimal": 18
    },
    {
        "name": 'Ether',
        "symbol": "ETH",
        "address": '0x0000000000000000000000000000000000000000',
        "logo": "ether.png",
        "decimal": 18
    },
    {
        "name": 'FunFair',
        "symbol": "FUN",
        "address": '0x419d0d8bdd9af5e606ae2232ed285aff190e711b',
        "logo": "funfair.png",
        "decimal": 8
    },
    {
        "name": 'Golem',
        "symbol": "GNT",
        "address": '0xa74476443119A942dE498590Fe1f2454d7D4aC0d',
        "logo": "golem.png",
        "decimal": 18
    },
    {
        "name": 'Gnosis',
        "symbol": "GNO",
        "address": '0x6810e776880c02933d47db1b9fc05908e5386b96',
        "logo": "gnosis.png",
        "decimal": 18
    },
    {
        "name": 'Grid+',
        "symbol": "GRID",
        "address": '0x12b19d3e2ccc14da04fae33e63652ce469b3f2fd',
        "logo": "grid.png",
        "decimal": 12
    },
    {
        "name": 'ICONOMI',
        "symbol": "ICN",
        "address": '0x888666CA69E0f178DED6D75b5726Cee99A87D698',
        "logo": "iconomi.png",
        "decimal": 18
    },
    {
        "name": 'ICON',
        "symbol": "ICX",
        "address": '0xb5a5f22694352c15b00323844ad545abb2b11028',
        "logo": "icon_icx.png",
        "decimal": 18
    },
    {
        "name": 'KyberNetwork',
        "symbol": "KNC",
        "address": '0xdd974d5c2e2928dea5f71b9825b8b646686bd200',
        "logo": "kyber.png",
        "decimal": 18
    },
    {
        "name": 'Leverj',
        "symbol": "LEV",
        "address": '0x0f4ca92660efad97a9a70cb0fe969c755439772c',
        "logo": "leverj.png",
        "decimal": 9
    },
    {
        "name": 'Modum',
        "symbol": "MOD",
        "address": '0x957c30ab0426e0c93cd8241e2c60392d08c6ac8e',
        "logo": "modum.png",
        "decimal": 0
    },
    {
        "name": 'OmiseGo',
        "symbol": "OMG",
        "address": '0xd26114cd6ee289accf82350c8d8487fedb8a0c07',
        "logo": "omisego.png",
        "decimal": 18
    },
    {
        "name": 'Populous',
        "symbol": "PPT",
        "address": '0xd4fa1460f537bb9085d22c7bccb5dd450ef28e3a',
        "logo": "populous.png",
        "decimal": 8
    },
    {
        "name": 'Qtum',
        "symbol": "QTUM",
        "address": '0x9a642d6b3368ddc662ca244badf32cda716005bc',
        "logo": "qtum.png",
        "decimal": 18
    },
    {
        "name": 'Raiden',
        "symbol": "RDN",
        "address": '0x255aa6df07540cb5d3d297f0d0d4d84cb52bc8e6',
        "logo": "raiden.png",
        "decimal": 18
    },
    {
        "name": 'RChain',
        "symbol": "RHOC",
        "address": '0x168296bb09e24a88805cb9c33356536b980d3fc5',
        "logo": "rchain.png",
        "decimal": 8
    },
    {
        "name": 'Request Network',
        "symbol": "REQ",
        "address": '0x8f8221afbb33998d8584a2b05749ba73c37a938a',
        "logo": "request.png",
        "decimal": 18
    },
    {
        "name": 'Ripio Credit Network',
        "symbol": "RCN",
        "address": '0xf970b8e36e23f7fc3fd752eea86f8be8d83375a6',
        "logo": "ripio.png",
        "decimal": 18
    },
    {
        "name": 'Rivet',
        "symbol": "RVT",
        "address": '0x3d1ba9be9f66b8ee101911bc36d3fb562eac2244',
        "logo": "rivet.png",
        "decimal": 18
    },
    {
        "name": 'Santiment',
        "symbol": "SAN",
        "address": '0x7c5a0ce9267ed19b22f8cae653f198e3e8daf098',
        "logo": "santiment.png",
        "decimal": 18
    },
    {
        "name": 'StatusNetwork',
        "symbol": "SNT",
        "address": '0x744d70fdbe2ba4cf95131626614a1763df805b9e',
        "logo": "status.png",
        "decimal": 18
    },
    {
        "name": 'Storm',
        "symbol": "STORM",
        "address": '0xd0a4b8946cb52f0661273bfbc6fd0e0c75fc6433',
        "logo": "storm.png",
        "decimal": 18
    },
    {
        "name": 'Swarm City',
        "symbol": "SWT",
        "address": '0xb9e7f8568e08d5659f5d29c4997173d84cdf2607',
        "logo": "swarmcity.png",
        "decimal": 18
    },
    {
        "name": 'TenXPay',
        "symbol": "PAY",
        "address": '0xb97048628db6b661d4c2aa833e95dbe1a905b280',
        "logo": "tenx.png",
        "decimal": 18
    },
    {
        "name": 'VeChain',
        "symbol": "VEN",
        "address": '0xd850942ef8811f2a866692a623011bde52a462c1',
        "logo": "vechain.png",
        "decimal": 18
    },
    {
        "name": 'Walton',
        "symbol": "WTC",
        "address": '0xb7cb1c96db6b22b0d3d9536e0108d062bd488f74',
        "logo": "walton.png",
        "decimal": 18
    },
    {
        "name": 'Wrapped Ether',
        "symbol": "WETH",
        "address": '0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2',
        "logo": "weth.png",
        "decimal": 18
    },
]


let EthereumTokensSN = EthereumTokens.slice(0);

EthereumTokensSN.sort((a, b) => {
    let aLow = a.name.toLocaleLowerCase();
    let bLow = b.name.toLocaleLowerCase();

    return aLow < bLow ? -1 : aLow === bLow ? 0 : 1;
});

var getTokenByName = (name) => {
    let l = 0;
    let h = EthereumTokensSN.length - 1;
    
    let nameLow = name.toLocaleLowerCase();

    while(l <= h) {
        let m = Math.floor((l + h) / 2);

        let mName = EthereumTokensSN[m].name.toLocaleLowerCase();
    
        let c = nameLow < mName ? -1 : nameLow === mName ? 0 : 1;

        if(c === 0) {
            return EthereumTokensSN[m];
        } else if(c > 0) {
            l = m + 1;
        } else {
            h = m - 1;
        }
    }
    return undefined;
}

let EthereumTokensSA = EthereumTokens.slice(0);

EthereumTokensSA.sort((a, b) => {
    let aLow = a.address.toLocaleLowerCase();
    let bLow = b.address.toLocaleLowerCase();

    return aLow < bLow ? -1 : aLow === bLow ? 0 : 1;
});

var getTokenByAddress = (address) => {
    let l = 0;
    let h = EthereumTokensSA.length - 1;

    let addressLow = address.toLocaleLowerCase();

    while(l <= h) {
        let m = Math.floor((l + h) / 2);
        let mAddr = EthereumTokensSA[m].address.toLocaleLowerCase();
        let c = addressLow < mAddr ? -1 : addressLow === mAddr ? 0 : 1;
        if(c === 0) {
            return EthereumTokensSA[m];
        } else if(c > 0) {
            l = m + 1;
        } else {
            h = m - 1;
        }
    }    
    // if this point is reached, the token was not found in the list
    return undefined;
}

var addTokenByAddress = (address) => {
    return fetch(`https://api.ethplorer.io/getTokenInfo/`+address+
          `?apiKey=freekey`)
    .then(res => res.json())
    .then(response => {
        addAndUpdateTokenLists({
            "name": response.name,
            "symbol": response.symbol,
            "address": address,
            "logo": "",
            "decimal": parseInt(response.decimals, 10)
        })
        console.log('pushed');
    })
}

var addAndUpdateTokenLists = (newToken) => {
    EthereumTokensSA.push(newToken);
    EthereumTokensSA.sort((a, b) => {
        let aLow = a.address.toLocaleLowerCase();
        let bLow = b.address.toLocaleLowerCase();

        return aLow < bLow ? -1 : aLow === bLow ? 0 : 1;
    });

    EthereumTokensSN.push(newToken);
    EthereumTokensSN.sort((a, b) => {
        let aLow = a.name.toLocaleLowerCase();
        let bLow = b.name.toLocaleLowerCase();

        return aLow < bLow ? -1 : aLow === bLow ? 0 : 1;
    });

}

module.exports.EthereumTokens = {
    AllTokens: EthereumTokens,
    getTokenByName,
    getTokenByAddress,
    addTokenByAddress
}